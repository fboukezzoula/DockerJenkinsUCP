
$logo = @"

   ___   __    ___        ___        _____           _        _ _           
  / _ \ /__\  / __\___   /   \___    \_   \_ __  ___| |_ __ _| | | ___ _ __ 
 / /_\// \// / /  / _ \ / /\ / _ \    / /\/ '_ \/ __| __/ _`  | | |/ _ \ '__|
/ /_\\/ _  \/ /__| (_) / /_//  __/ /\/ /_ | | | \__ \ || (_| | | |  __/ |   
\____/\/ \_/\____/\___/___,' \___| \____/ |_| |_|___/\__\__,_|_|_|\___|_|   


"@

Write-Host $logo -ForegroundColor DarkMagenta

$nomFichier = "F:\test\test.txt"  # Spécifiez le chemin complet du fichier
$hostRecherche = "model"    # Spécifiez le nom du host à rechercher
$nouveauBloc = @"

Host model
	boukezzoulafinal
	fouzi


"@

$contenuFichier = Get-Content $nomFichier -Raw

$pattern = "(?ms)^\s*Host\s+$hostRecherche\b[\s\S]*?(?=^\S|\z)"
$match = [regex]::Match($contenuFichier, $pattern)

if ($match.Success) {
    $blocTrouve = $match.Value
    $contenuModifie = $contenuFichier -replace [regex]::Escape($blocTrouve), $nouveauBloc
    $contenuModifie | Set-Content -Path $nomFichier -Force
    Write-Output "Le bloc correspondant au host '$hostRecherche' a été remplacé avec succès."
} else {
    Write-Output "Aucun bloc trouvé pour le host '$hostRecherche' dans le fichier."
}
